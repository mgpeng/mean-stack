Webpack using errors list

1) Using webpack compile error,
ERROR in [at-loader] ./public/app/route-study/product/detail/detail.component.ts:13:14 
[0]     TS1219: Experimental support for decorators is a feature that is subject to change 
in a future release. Set the 'experimentalDecorators' option to remove this warning.

Solution: (doesn't work sometime, did work somethime)
   a) find vscode preference-> setting -> user.setting 
   b) set in file :
         "typescript.tsdk": "/usr/local/lib/node_modules/typescript/lib"
   c) restart vs code and run terminal compile again

********************************************************************************************
2)After webpack compiled, run show error in browser
compiler.es5.js:14582 Uncaught Error: Can't resolve all parameters for ArticlesService: (?).
    at syntaxError (http://localhost:3000/build/vendor.js:42432:34) [<root>]
    at CompileMetadataResolver._getDependenciesMetadata (http://localhost:3000/build/vendor.js:55282:35) [<root>]
    at CompileMetadataResolver._getTypeMetadata (http://localhost:3000/build/vendor.js:55150:26) [<root>]
    at CompileMetadataResolver._getInjectableMetadata (http://localhost:3000/build/vendor.js:55136:21) [<root>]
    at CompileMetadataResolver.getProviderMetadata (http://localhost:3000/build/vendor.js:55425:40) [<root>]
    at http://localhost:3000/build/vendor.js:55355:49 [<root>]
    at Array.forEach (native) [<root>]
    at CompileMetadataResolver._getProvidersMetadata (http://localhost:3000/build/vendor.js:55316:19) [<root>]
    at CompileMetadataResolver.getNgModuleMetadata (http://localhost:3000/build/vendor.js:54971:50) [<root>]
    at CompileMetadataResolver.getNgModuleSummary (http://localhost:3000/build/vendor.js:54824:52) [<root>]
    at http://localhost:3000/build/vendor.js:54897:72 [<root>]
    at Array.forEach (native) [<root>]
    at CompileMetadataResolver.getNgModuleMetadata (http://localhost:3000/build/vendor.js:54882:49) [<root>]
    at JitCompiler._loadModules (http://localhost:3000/build/vendor.js:66063:64) [<root>]


********************************************************************************************
3)After webpack compiled, run show error in browser
Hash: 691286602095ed69fa0d
[0] Version: webpack 2.2.1
[0] Time: 87ms
[0]            Asset       Size  Chunks             Chunk Names
[0]     bootstrap.js  283 bytes       1  [emitted]  bootstrap
[0] bootstrap.js.map   89 bytes       1  [emitted]  bootstrap
[0]  [676] ./public/bootstrap.js 157 bytes {1} [built] [failed] [1 error]
[0]  [677] ./public/polyfills.js 157 bytes {2} [built] [failed] [1 error]
[0]  [678] ./public/vendor.js 154 bytes {0} [built] [failed] [1 error]
[0] 
[0] ERROR in ./public/polyfills.js
[0] Module build failed: Error: ENOENT: no such file or directory, open '/Users/apple/Documents/xixijiu_ng-md/mean-stack/public/polyfills.js'
[0] 
[0] ERROR in ./public/vendor.js
[0] Module build failed: Error: ENOENT: no such file or directory, open '/Users/apple/Documents/xixijiu_ng-md/mean-stack/public/vendor.js'
[0] 
[0] ERROR in ./public/bootstrap.js
[0] Module build failed: Error: ENOENT: no such file or directory, open '/Users/apple/Documents/xixijiu_ng-md/mean-stack/public/bootstrap.js


****************************************************************************************************
4) compiled error because of webpack.config.js 
   ERROR:
      ERROR in [at-loader] ./node_modules/@angular/core/src/change_detection/differs/iterable_differs.d.ts:15:48 
[0]     TS2304: Cannot find name 'Iterable'.
[0] 
[0] ERROR in [at-loader] ./node_modules/@types/core-js/index.d.ts:47:36 
[0]     TS2304: Cannot find name 'Iterable'.
[0] 
[0] ERROR in [at-loader] ./node_modules/@types/core-js/index.d.ts:350:48 
[0]     TS2304: Cannot find name 'PropertyKey'.
........more same errors............... 

[0] ERROR in [at-loader] ./public/app/app-routing.module.ts:19:14 
[0]     TS1219: Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning.
[0] 
[0] ERROR in [at-loader] ./public/app/app.component.ts:13:14 
[0]     TS1219: Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning.
[0] 
...........more same errors..............
-----------------------
reasons:
     {
        test: /\.ts$/,
        loaders: [
          {
            loader: 'awesome-typescript-loader',
            options: { configFileName: helpers.root('public', 'tsconfig.json') }  <==== ERROR 
          } , 'angular2-template-loader'
        ]
      },

      tsconfig.json doesn't exist in public folder

*************************************************************************************
5) webpack bundles put before body tag in 'index.ejs'
    IF:
        <!DOCTYPE html>
        <html>
        <head>
        ....
        <!-- using webpack  -->
            <script src="build/polyfills.js"></script>
            <script src="build/vendor.js"></script>
            <script src="build/main.js"></script>
        </head>
        <body>
        ....
        </body>
        </html>

  ERROR:
    AppComponent_Host.html:1 ERROR CONTEXT DebugContext_ {view: Object, nodeIndex: 0, nodeDef: Object, elDef: Object, elView: Object}
    View_AppComponent_Host_0 @ AppComponent_Host.html:1
    proxyClass @ compiler.es5.js:13572
    DebugContext_.logError @ core.es5.js:12953
    ErrorHandler.handleError @ core.es5.js:1149
    (anonymous) @ core.es5.js:4660
    ZoneDelegate.invoke @ zone.js:365
    onInvoke @ core.es5.js:4125
    ZoneDelegate.invoke @ zone.js:364
    Zone.run @ zone.js:125
    (anonymous) @ zone.js:758
    ZoneDelegate.invokeTask @ zone.js:398
    onInvokeTask @ core.es5.js:4116
    ZoneDelegate.invokeTask @ zone.js:397
    Zone.runTask @ zone.js:165
    drainMicroTaskQueue @ zone.js:591
    zone.js:567 Unhandled Promise rejection: The selector "app" did not match any elements ; Zone: <root> ; Task: Promise.then ; Value: Error: The selector "app" did not match any elements
        at DefaultDomRenderer2.selectRootElement (http://localhost:3000/build/vendor.js:28426:19) [angular]
        at DebugRenderer2.selectRootElement (http://localhost:3000/build/vendor.js:13766:49) [angular]
        at createElement (http://localhost:3000/build/vendor.js:9934:23) [angular]
        at createViewNodes (http://localhost:3000/build/vendor.js:12537:44) [angular]
        at createRootView (http://localhost:3000/build/vendor.js:12484:5) [angular]
        at callWithDebugContext (http://localhost:3000/build/vendor.js:13615:42) [angular]
        at Object.debugCreateRootView [as createRootView] (http://localhost:3000/build/vendor.js:13076:12) [angular]
        at ComponentFactory_.create (http://localhost:3000/build/vendor.js:10420:46) [angular]
        at ComponentFactoryBoundToModule.create (http://localhost:3000/build/vendor.js:4029:29) [angular]
        at ApplicationRef_.bootstrap (http://localhost:3000/build/vendor.js:5611:57) [angular]
        at http://localhost:3000/build/vendor.js:5398:79 [angular]
        at Array.forEach (native) [angular]
        at PlatformRef_._moduleDoBootstrap (http://localhost:3000/build/vendor.js:5398:42) [angular]
        at http://localhost:3000/build/vendor.js:5360:27 [angular] Error: The selector "app" did not match any elements
        at DefaultDomRenderer2.selectRootElement (http://localhost:3000/build/vendor.js:28426:19) [angular]
        at DebugRenderer2.selectRootElement (http://localhost:3000/build/vendor.js:13766:49) [angular]
        at createElement (http://localhost:3000/build/vendor.js:9934:23) [angular]
        at createViewNodes (http://localhost:3000/build/vendor.js:12537:44) [angular]
        at createRootView (http://localhost:3000/build/vendor.js:12484:5) [angular]
        at callWithDebugContext (http://localhost:3000/build/vendor.js:13615:42) [angular]
        at Object.debugCreateRootView [as createRootView] (http://localhost:3000/build/vendor.js:13076:12) [angular]
        at ComponentFactory_.create (http://localhost:3000/build/vendor.js:10420:46) [angular]
        at ComponentFactoryBoundToModule.create (http://localhost:3000/build/vendor.js:4029:29) [angular]
        at ApplicationRef_.bootstrap (http://localhost:3000/build/vendor.js:5611:57) [angular]
        at http://localhost:3000/build/vendor.js:5398:79 [angular]
        at Array.forEach (native) [angular]
        at PlatformRef_._moduleDoBootstrap (http://localhost:3000/build/vendor.js:5398:42) [angular]
        at http://localhost:3000/build/vendor.js:5360:27 [angular]

Solution:
        <!DOCTYPE html>
        <html>
        <head>
        ....
        </head>
        <body>
        ....
        </body>
          <!-- using webpack  -->
            <script src="build/polyfills.js"></script>
            <script src="build/vendor.js"></script>
            <script src="build/main.js"></script>
        </html>

    OR:
            <!-- using webpack  -->
            <script src="build/polyfills.js"></script>
            <script src="build/vendor.js"></script>
            <script src="build/main.js"></script>
         </body>
        </html>
****************************************************************************
6) set socket.io-client in webpack's vendor.ts
   in app's component use socket.io-client like:
     Firstly, import * as io from 'socket.io-client';
     and then ,  ... this.socket = io(); ...
   in vendor.ts:
      no use import it, socket.io-client is in main.js
      using "import  'socket.io-client';"  socket.io-client is in verndor.js

   someone use 
        new ProvidePlugin({
            io: 'socket.io-client',
            feathers: 'feathers-client'
        })
   in my case, don't need.
   by the way, have npm install @types/socket.io-client
******************************************************************************
7)Use html-webpack-plugin append files endless in index.ejs when index.ejs outside build folder
  I have file structure:
 ```
      app
        |--controllers
        |--models
        |--routes
        |--views
               |--index.ejs
               |--signin.ejs
      config  <---  config for mongodb express and so on
      public
           |--app   <---- main client ts files using angular 2
           |--build <---- bundles in this folder,but it is empty before run webpack
           main.ts
           polyfills.ts
           vendor.ts
      webpack.config.js
      package.json
      ...
```
webpack.config.js like:
    
 ```
...
         entry: {
                'polyfills': './public/polyfills',
                'vendor': './public/vendor',
                'main': './public/main'
        },
        ...
        output: {
            path: 'public/build',
            filename: '[name].js'
        },
        ...
         plugins: [
             ...
                new HtmlWebpackPlugin({
                filename:'../../app/views/index.ejs',
                template: './app/views/index.ejs',
                inject: true
                }),
         ...
```
I want to use html-webpack-plugin append bundles (main.js, polyfills.js and vendor.js) in index.ejs which is in app/views folder.

 After run webpack, webpack append bundles in app/views/index.ejs endless:
    A) **ERROR : terminal show as**

 ```
[at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 1.124 sec.
        [0] Hash: 9ee19a16cc5fbd5a5a4f
        [0] Version: webpack 2.2.1
        [0] Time: 35439ms
        [0]                     Asset     Size  Chunks                    Chunk Names
        [0]                      0.js  12.8 kB       0  [emitted]         
        [0]                 vendor.js  8.32 MB       1  [emitted]  [big]  vendor
        [0]                   main.js   142 kB       2  [emitted]         main
        [0]                      3.js  7.67 kB       3  [emitted]         
        [0]                      4.js  8.02 kB       4  [emitted]         
        [0]                      5.js  8.49 kB       5  [emitted]         
        [0]                      6.js  9.74 kB       6  [emitted]         
        [0]              polyfills.js   771 kB       7  [emitted]  [big]  polyfills
        [0] ../../app/views/index.ejs  1.62 kB          [emitted]         
        [0]   [16] ./~/@angular/router/@angular/router.es5.js 210 kB {1} [built]
        [0]   [35] ./~/@angular/common/@angular/common.es5.js 131 kB {1} [built]
        [0]   [42] ./~/@angular/platform-browser/@angular/platform-browser.es5.js 142 kB {1} [built]
        [0]   [56] ./~/@angular/forms/@angular/forms.es5.js 204 kB {1} [built]
        [0]   [73] ./~/@angular/http/@angular/http.es5.js 72.7 kB {1} [built]
        [0]   [92] ./~/@angular/platform-browser-dynamic/@angular/platform-browser-dynamic.es5.js 6.09 kB {1} [built]
        [0]  [131] ./~/@angular/compiler/@angular/compiler.es5.js 967 kB {1} [built]
        [0]  [132] ./~/socket.io-client/lib/index.js 2.17 kB {1} [built]
        [0]  [232] ./public/app/app.module.ts 2.24 kB {2} [built]
        [0]  [233] ./~/core-js/es6/array.js 944 bytes {7} [built]
        [0]  [235] ./~/core-js/es6/map.js 207 bytes {7} [built]
        [0]  [250] ./~/zone.js/dist/zone.js 96 kB {7} [built]
        [0]  [690] ./public/main.ts 302 bytes {2} [built]
        [0]  [691] ./public/polyfills.ts 1.04 kB {7} [built]
        [0]  [692] ./public/vendor.ts 432 bytes {1} [built]
        [0]     + 694 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 1.49 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.002 sec.
        [0] Hash: 9856aaee802ea59e23ab
        [0] Version: webpack 2.2.1
        [0] Time: 554ms
        [0]                     Asset     Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  1.84 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 1.73 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.001 sec.
        [0] Hash: 2b7959dab003c7ad9619
        [0] Version: webpack 2.2.1
        [0] Time: 330ms
        [0]                     Asset     Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  2.07 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 1.97 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.002 sec.
        [0] Hash: bcd379989c08f4cfd83d
        [0] Version: webpack 2.2.1
        [0] Time: 233ms
        [0]                     Asset    Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  2.3 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 2.21 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.002 sec.
        [0] Hash: 6d9bc816b6e1bd59d359
        [0] Version: webpack 2.2.1
        [0] Time: 223ms
        [0]                     Asset     Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  2.52 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 2.45 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.001 sec.
        [0] Hash: 86eca95ea912d1bf8b45
        [0] Version: webpack 2.2.1
        [0] Time: 203ms
        [0]                     Asset     Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  2.75 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 2.68 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.002 sec.
        [0] Hash: a9c45953ad8ef1d871d2
        [0] Version: webpack 2.2.1
        [0] Time: 216ms
        [0]                     Asset     Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  2.97 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 2.92 kB {0} [built]
        [0] 
        [0] [at-loader] Checking started in a separate process...
        [0] 
        [0] [at-loader] Ok, 0.002 sec.
        [0] Hash: 9c60072b592a7263ad91
        [0] Version: webpack 2.2.1
        [0] Time: 204ms
        [0]                     Asset    Size  Chunks             Chunk Names
        [0] ../../app/views/index.ejs  3.2 kB          [emitted]  
        [0]  [231] ./public async 160 bytes {1} [built]
        [0]     + 708 hidden modules
        [0] Child html-webpack-plugin for "../../app/views/index.ejs":
        [0]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index.ejs 3.16 kB {0} [built]

        ^C  <-----  I HAVE TO FORCE TO STOP IT !
```

B) **ERROR : app/views/index.ejs files changed from:**

```
<!DOCTYPE html>
        <html>
        <head>
            <base href="/">
            <title><%= title %></title>
            <script type="text/javascript">
            window.user=<%- user || 'null' %>;
            </script>
        </head>
        <body>
            <app>
            <h1>Loading...</h1>
            </app>
            <h1><%= subtitle %></h1>
                <% if(userFullName){ %> 
                <h2>Hello <%= userFullName %></h2>
                <a href="/signout">Signout</a>
                <% } else { %> 
                        <a href="/signup">Signup</a>
                        <a href="/signin">Signin</a>
                <% } %>
                <br/>
                <img src="img/logo.png" alt="logo"/>  
        </body>
        </html>
```
 To:

 ```
         ...
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        <script type="text/javascript" src="../../public/build/polyfills.js"></script>
        <script type="text/javascript" src="../../public/build/vendor.js"></script>
        <script type="text/javascript" src="../../public/build/main.js"></script>
        </body>
        ....
```
C) **NO ERROR :  inside public/build bundle files is correct**
```
            public
                |----build
                            |-- 0.js   
                            |--3.js
                            |--4.js      
                            |--5.js      
                            |--6.js
                            |--polyfills.js
                            |--vendor.js
                            |--main.js
```
I changed webpack.config.js
```
             plugins: [
             ...
                new HtmlWebpackPlugin({
                filename:'./app/views/index.ejs',
                ...
                }),
         ...
```
index.ejs compiled in public/build/app/views/index.ejs
I changed webpack.config.js again
```
             plugins: [
             ...
                new HtmlWebpackPlugin({
                filename:'../app/views/index.ejs',
                 ...
                }),
         ...
```
index.ejs compiled in public/app/views/index.ejs, this is what I want.


Solution:
    changed only expressjs config:
       ...
       //--- app.set('views','./app/views');
        app.set('views','./public/build');  <---changed to find views/index.ejs to public/build/index.ejs
        app.set('view engine','ejs');
       ...

    changed webpack.config.js
       ...
       output: {
            path: 'public/build',
            filename: '[name].[hash].js',
            publicPath: 'build'   <---- set build/ before output bundles
        },
       ...

    so get build :
    public/build/vendor.[hash].js
    public/build/main.[hash].js
    public/build/polyfills.[hash].js
    public/build/index.ejs

    and index.ejs like:
       ...
        <script type="text/javascript" src="build/polyfills.ae8a9abf8bb75b4c7a2f.js"></script>
        <script type="text/javascript" src="build/vendor.ae8a9abf8bb75b4c7a2f.js"></script>
        <script type="text/javascript" src="build/main.ae8a9abf8bb75b4c7a2f.js"></script>
        </body>
       ...
    Now everything is fine.

  Better Solution:
      issue from webpack I asked, endless append because of Html-webpack-plugin's template
      and filename use same filename, changed as:
       new HtmlWebpackPlugin({
            filename:'index.ejs',
            // filename:'../../app/views/index-origin.ejs', LEAD TO ENDLESS APPEND BUNDLES because of same file name
            template: './app/views/index-origin.ejs',
            inject: true
        }),
      everything work.
********************************************************************************************
8) angular route config use lazy loading setting by 'loadChildren', when angular loading
   those chunks which separate from main.js got Error: Loading chund <id> failed.

   webpack.config.js
       ...
       output: {
            path: 'public/build',
            filename: '[name].js',
            chunkFilename: "[name].chunk.js",
            publicPath: 'build'   <=== ERROR here
        },
        ...

    found in polyfills.js
        // __webpack_public_path__
     	__webpack_require__.p = "build";
    and in terminal 
        GET build1.chunk.js   <=== path error 
    so changed webpack.config.js
       ...
       output: {
            path: 'public/build',
            filename: '[name].js',
            chunkFilename: "[name].chunk.js",
            publicPath: 'build/'   <=== changed here
        },
        ...

    and get in polyfills.js
        // __webpack_public_path__
     	__webpack_require__.p = "build/";

    so it is clear everything work like charm!
*****************************************************************************************
9) Webpack 3 compile more than one time and webpack 2.7.0 and 2.6.1 no

Same environment and webpacak.config.js as 
```
const webpack = require('webpack');
const path=require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ExtractTextPlugin = require('extract-text-webpack-plugin');
const helpers = require('./helpers');
const CleanWebpackPlugin = require('clean-webpack-plugin');

module.exports = {
  entry: {
    'polyfills': './public/polyfills',
    'vendor': './public/vendor',
    'main': './public/main'
  },
  devtool: 'inline-source-map',
  resolve: {
    extensions: [ '.js', '.ts']
  },
  output: {
    path: path.resolve('public','./build'),
    filename: '[name].[hash].js',
    publicPath: 'build/',
    sourceMapFilename: '[name].map'
  },
  module: {
    rules: [
     {
        test: /\.ts$/,
        loaders: [
          {
            loader: 'awesome-typescript-loader',
            options: { configFileName: helpers.root('public', 'tsconfig.json') }
          } , 'angular2-template-loader','angular2-router-loader'
        ]
      },
      {
        test: /\.html$/,
        loader: 'html-loader'
      },
      {
        test: /\.(png|jpe?g|gif|svg|woff|woff2|ttf|eot|ico)$/,
        loader: 'file-loader?name=assets/[name].[hash].[ext]'
      },
      {
        test: /\.css$/,
        include: helpers.root('public', 'app'),
        loader: 'raw-loader'
      },
      {
        test: /\.ejs$/,
        use: 'raw-loader'
      }
    ]
  },
  plugins: [
    new webpack.optimize.CommonsChunkPlugin({
      name: ['main', 'vendor', 'polyfills']
    }),
    new HtmlWebpackPlugin({
      filename:'index.ejs',
      template: './app/views/index-origin.ejs',
      inject: true
    }),
    new webpack.ContextReplacementPlugin(
        // The (\\|\/) piece accounts for path separators in *nix and Windows
        // /angular(\\|\/)core(\\|\/)(esm(\\|\/)src|src)(\\|\/)linker/,
        /angular(\\|\/)core(\\|\/)@angular/,
        helpers.root('./public'), // location of your src
        { }
      )
  ]
};
```
Under webpack 3 get from console 
```
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 1.425 sec.
[1] Hash: a2b0085251400acf0f19
[1] Version: webpack 3.3.0
[1] Time: 132555ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.a2b0085251400acf0f19.js    13.2 kB       0  [emitted]         
[1]         1.a2b0085251400acf0f19.js    7.14 kB       1  [emitted]         
[1]    vendor.a2b0085251400acf0f19.js    8.65 MB       2  [emitted]  [big]  vendor
[1]      main.a2b0085251400acf0f19.js     136 kB       3  [emitted]         main
[1]         4.a2b0085251400acf0f19.js    7.89 kB       4  [emitted]         
[1]         5.a2b0085251400acf0f19.js    8.17 kB       5  [emitted]         
[1]         6.a2b0085251400acf0f19.js    8.64 kB       6  [emitted]         
[1]         7.a2b0085251400acf0f19.js    9.78 kB       7  [emitted]         
[1] polyfills.a2b0085251400acf0f19.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]   [10] (webpack)/buildin/global.js 509 bytes {8} [built]
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]  [230] ./public/app/chat/chat.service.ts 2.29 kB {3} [built]
[1]  [231] ./public/polyfills.ts 1.04 kB {8} [built]
[1]  [373] ./public/vendor.ts 432 bytes {2} [built]
[1]  [665] ./public/main.ts 302 bytes {3} [built]
[1]  [666] ./public/app/app.module.ts 2.24 kB {3} [built]
[1]  [667] ./public/app/coremodule/core.module.ts 1.24 kB {3} [built]
[1]  [668] ./public/app/app-routing.module.ts 1.22 kB {3} [built]
[1]  [669] ./public/app/authentication/authentication.module.ts 1.89 kB {3} [built]
[1]  [674] ./public/app/home/home.module.ts 1.27 kB {3} [built]
[1]  [678] ./public/app/articles/articles.module.ts 1.89 kB {3} [built]
[1]  [684] ./public/app/route-study/route-study.module.ts 1.98 kB {3} [built]
[1]  [686] ./public/app/chat/chat.module.ts 1.47 kB {3} [built]
[1]  [689] ./public/app/app.component.ts 1.87 kB {3} [built]
[1]     + 695 hidden modules
[1] Child html-webpack-plugin for "index.ejs":
[1]        [0] ./node_modules/html-webpack-plugin/lib/loader.js!./app/views/index-origin.ejs 664 bytes {0} [built]
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.011 sec.
[1] Hash: 57d9c2d87d3af9ed75dd
[1] Version: webpack 3.3.0
[1] Time: 2780ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.57d9c2d87d3af9ed75dd.js    13.8 kB       0  [emitted]         
[1]         1.57d9c2d87d3af9ed75dd.js    7.55 kB       1  [emitted]         
[1]    vendor.57d9c2d87d3af9ed75dd.js     8.7 MB       2  [emitted]  [big]  vendor
[1]      main.57d9c2d87d3af9ed75dd.js     141 kB       3  [emitted]         main
[1]         4.57d9c2d87d3af9ed75dd.js    8.32 kB       4  [emitted]         
[1]         5.57d9c2d87d3af9ed75dd.js    8.64 kB       5  [emitted]         
[1]         6.57d9c2d87d3af9ed75dd.js    9.11 kB       6  [emitted]         
[1]         7.57d9c2d87d3af9ed75dd.js    10.2 kB       7  [emitted]         
[1] polyfills.57d9c2d87d3af9ed75dd.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]     + 709 hidden modules
[1] Child html-webpack-plugin for "index.ejs":
[1]        1 module
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.007 sec.
[1] Hash: a2b0085251400acf0f19
[1] Version: webpack 3.3.0
[1] Time: 3723ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.a2b0085251400acf0f19.js    14.4 kB       0  [emitted]         
[1]         1.a2b0085251400acf0f19.js    8.02 kB       1  [emitted]         
[1]    vendor.a2b0085251400acf0f19.js    8.76 MB       2  [emitted]  [big]  vendor
[1]      main.a2b0085251400acf0f19.js     147 kB       3  [emitted]         main
[1]         4.a2b0085251400acf0f19.js     8.8 kB       4  [emitted]         
[1]         5.a2b0085251400acf0f19.js    9.15 kB       5  [emitted]         
[1]         6.a2b0085251400acf0f19.js    9.61 kB       6  [emitted]         
[1]         7.a2b0085251400acf0f19.js    10.7 kB       7  [emitted]         
[1] polyfills.a2b0085251400acf0f19.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]     + 709 hidden modules
[1] Child html-webpack-plugin for "index.ejs":
[1]        1 module

```
built two set bundles inside build folder 
```
0.57d9c2d87d3af9ed75dd.js
0.a2b0085251400acf0f19.js
1.57d9c2d87d3af9ed75dd.js
1.a2b0085251400acf0f19.js
4.57d9c2d87d3af9ed75dd.js
4.a2b0085251400acf0f19.js
5.57d9c2d87d3af9ed75dd.js
5.a2b0085251400acf0f19.js
6.57d9c2d87d3af9ed75dd.js
6.a2b0085251400acf0f19.js
7.57d9c2d87d3af9ed75dd.js
7.a2b0085251400acf0f19.js
index.ejs
main.57d9c2d87d3af9ed75dd.js
main.a2b0085251400acf0f19.js
polyfills.57d9c2d87d3af9ed75dd.js
polyfills.a2b0085251400acf0f19.js
vendor.57d9c2d87d3af9ed75dd.js
vendor.a2b0085251400acf0f19.js
```
webpack 3 compile under hash a2b0085251400acf0f19 two times
hash 57d9c2d87d3af9ed75dd do one time

Under webpack 2.7.0 it work fine
```
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 1.157 sec.
[1] Hash: 1637c8aff420b9256a54
[1] Version: webpack 2.7.0
[1] Time: 44314ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.1637c8aff420b9256a54.js    13.1 kB       0  [emitted]         
[1]         1.1637c8aff420b9256a54.js    7.05 kB       1  [emitted]         
[1]    vendor.1637c8aff420b9256a54.js    8.64 MB       2  [emitted]  [big]  vendor
[1]      main.1637c8aff420b9256a54.js     135 kB       3  [emitted]         main
[1]         4.1637c8aff420b9256a54.js     7.8 kB       4  [emitted]         
[1]         5.1637c8aff420b9256a54.js    8.09 kB       5  [emitted]         
[1]         6.1637c8aff420b9256a54.js    8.56 kB       6  [emitted]         
[1]         7.1637c8aff420b9256a54.js    9.69 kB       7  [emitted]         
[1] polyfills.1637c8aff420b9256a54.js     755 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]   [35] ./~/@angular/common/@angular/common.es5.js 131 kB {2} [built]
[1]   [43] ./~/@angular/platform-browser/@angular/platform-browser.es5.js 141 kB {2} [built]
[1]   [57] ./~/@angular/forms/@angular/forms.es5.js 204 kB {2} [built]
[1]   [74] ./~/@angular/http/@angular/http.es5.js 74.6 kB {2} [built]
[1]   [93] ./~/@angular/platform-browser-dynamic/@angular/platform-browser-dynamic.es5.js 5.88 kB {2} [built]
[1]  [131] ./~/@angular/compiler/@angular/compiler.es5.js 1.03 MB {2} [built]
[1]  [132] ./~/socket.io-client/lib/index.js 2.17 kB {2} [built]
[1]  [231] ./public/app/app.module.ts 2.24 kB {3} [built]
[1]  [232] ./~/core-js/es6/array.js 944 bytes {8} [built]
[1]  [233] ./~/core-js/es6/date.js 231 bytes {8} [built]
[1]  [234] ./~/core-js/es6/map.js 207 bytes {8} [built]
[1]  [235] ./~/core-js/es6/math.js 690 bytes {8} [built]
[1]  [264] ./public/main.ts 302 bytes {3} [built]
[1]  [265] ./public/polyfills.ts 1.04 kB {8} [built]
[1]  [266] ./public/vendor.ts 432 bytes {2} [built]
[1]     + 695 hidden modules
[1] Child html-webpack-plugin for "index.ejs":
[1]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index-origin.ejs 664 bytes {0} [built]
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.008 sec.
```
built correct in build folder 
```
0.1637c8aff420b9256a54.js
1.1637c8aff420b9256a54.js
4.1637c8aff420b9256a54.js
5.1637c8aff420b9256a54.js
6.1637c8aff420b9256a54.js
7.1637c8aff420b9256a54.js
index.ejs
main.1637c8aff420b9256a54.js
polyfills.1637c8aff420b9256a54.js
vendor.1637c8aff420b9256a54.js
```
Solution:
    1) move 'build' folder which for bundles out 'public' folder which for angular 2 source code, 
    so it works.
    2) change express config file  
        // app.set('views','./public/build');      <--- before
        app.set('views','./build');                <--- after

       // app.use('/', express.static(path.resolve('./public')));  <--- before
       app.use('/', express.static(path.resolve('./build')));      <--- after
before:
root/public--
            |--build-|
                      |---index.ejs
                      |--vendor.[hash1].ts
                      |--vendor.[hash2].ts
                      |--main.[hash1].ts
                      |--main.[hash2].ts
                      |--polyfills.[hash1].ts
                      |--polyfills.[hash2].ts
                      |--0.[hash1].ts
                      |--0..[hash2].ts
                           ....
            |--app      <--- angular source code
            |--style.css
            |--vendor.ts
            |--main.ts
            |--polyfills.ts
            ....
after:

root/build --
            |---index.ejs
            |--vendor.[hash].ts
            |--main.[hash].ts
            |--polyfills.[hash].ts
            |--0.[hash].ts
            |--1..[hash].ts
            ....
root/public--
            |--app      <--- angular source code
            |--style.css
            |--vendor.ts
            |--main.ts
            |--polyfills.ts
            ....
And I don't understand what is meaning "your output folder as part of the dependency graph" 
and so why I should "added the /public folder 
to the dependency graph via ContextReplacementPlugin". I can't find documents which is helpful.
****************************************************************************************
PAY ATTENTION:  change some folder name, 'public' ->'client-src'  , 'build' -> 'dist'
                'generic-config' -> 'client-config'   'config' -> 'server-config'
                'app' -> 'server-src'
*****************************************************************************************
10) ExtractTextPlugin doesn't generate .css file
    app.component.ts should import style.css file otherwise webpack think you don't use it.
*****************************************************************************************
10) webpack bundle server error
    ERROR in ./node_modules/socket.io/lib/index.js
    Module not found: Error: Can't resolve 'socket.io-client/package' in '/Users/apple/Documents/xixijiu_ng-md/mean-stack/node_modules/socket.io/lib'
    @ ./node_modules/socket.io/lib/index.js 10:20-55
    @ ./server-config/express.js
    @ ./server.js
    Clues:
       a)  found in ./node_modules/socket.io/lib/index.js
           var clientVersion = require('socket.io-client/package').version;
       b) form stackoverflow
    Solution:
       ...
       resolve: {
          extensions: [ ... ,'json'] 
        },
       ...
       plugins: [
          new webpack.NormalModuleReplacementPlugin(
              /require(\'socket.io-client\/package\').version/, 
              require('socket.io-client/package').version
            )
        ]
*********************************************************************************************
11) webpack bundle server error
    run node bundle server.js console

          /Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432
            driver = !(function webpackMissingModule() { var e = new Error("Cannot find module \".\""); e.code = 'MODULE_NOT_FOUND'; throw e; }());
                  ^

          Error: Cannot find module "."
              at webpackMissingModule (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432:56)
              at Object.<anonymous> (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432:134)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.<anonymous> (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:27756:16)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.webpackEmptyContext.keys (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:93162:14)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.Long.toInt (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:14637:18)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.map../development.js (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:93053:18)
          Mac:mean-stack apple$ node ./dist-server/server.js
          /Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432
            driver = !(function webpackMissingModule() { var e = new Error("Cannot find module \".\""); e.code = 'MODULE_NOT_FOUND'; throw e; }());
                  ^

          Error: Cannot find module "."
              at webpackMissingModule (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432:56)
              at Object.<anonymous> (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:29432:134)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.<anonymous> (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:27756:16)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.webpackEmptyContext.keys (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:93162:14)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.Long.toInt (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:14637:18)
              at __webpack_require__ (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:20:30)
              at Object.map../development.js (/Users/apple/Documents/xixijiu_ng-md/mean-stack/dist-server/server.js:93053:18)
Solution:

*****************************************************************************************
12) Webpack bundle server warnings
   WARNING in ./node_modules/require_optional/index.js
    63:18-42 Critical dependency: the request of a dependency is an expression

    WARNING in ./node_modules/require_optional/index.js
    71:20-44 Critical dependency: the request of a dependency is an expression

    WARNING in ./node_modules/require_optional/index.js
    78:35-67 Critical dependency: the request of a dependency is an expression
   Solution 1: doesn't work
      a) npm install webpack-node-externals --save-dev
      b) const nodeExternals = require('webpack-node-externals');
          ...
            {
              target: 'node',
              externals: [nodeExternals()],
            }
    Solution 2: work fine and even for all server side bundle external module
          form http://jlongster.com/Backend-Apps-with-Webpack--Part-I
          set config let all external lib don't bundle into
            var webpack = require('webpack');
            var path = require('path');
            var fs = require('fs');

            var nodeModules = {};
            fs.readdirSync('node_modules')
              .filter(function(x) {
                return ['.bin'].indexOf(x) === -1;
              })
              .forEach(function(mod) {
                nodeModules[mod] = 'commonjs ' + mod;
              });

            module.exports = {
              entry: './src/main.js',
              target: 'node',
              output: {
                path: path.join(__dirname, 'build'),
                filename: 'backend.js'
              },
              externals: nodeModules
            }
************************************************************************************************
